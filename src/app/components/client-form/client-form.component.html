<div class="form-wrapper" @slideIn>
  <h1>Client Form</h1>
  <div>
    {{clientForm.valid}}
    <form [formGroup]="clientForm" (ngSubmit)="clientForm.valid && onSubmit()">
      <mat-form-field appearance="outline">
        <mat-label>Name</mat-label>
        <input matInput placeholder="Placeholder" formControlName="name">
        <mat-hint>LATIN OR GEORGIAN LETTERS ONLY!</mat-hint>
        <mat-error *ngIf="(nameControl?.touched || nameControl?.dirty) && nameControl?.errors?.required">This Field is
          required
        </mat-error>
        <mat-error *ngIf="(nameControl?.touched || nameControl?.dirty) && nameControl?.errors?.twoLanguageNotAllowed">
          Only one language allowed!
        </mat-error>
        <mat-error *ngIf="(nameControl?.touched || nameControl?.dirty) && nameControl?.errors?.pattern">Only letters
          allowed!
        </mat-error>
        <mat-error *ngIf="(nameControl?.touched || nameControl?.dirty) && nameControl?.errors?.minlength">Min 2
          letters!
        </mat-error>
        <mat-error *ngIf="(nameControl?.touched || nameControl?.dirty) && nameControl?.errors?.maxlength">Max 50
          letters!
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Last Name</mat-label>
        <input matInput placeholder="Placeholder" formControlName="lastName">
        <mat-hint>LATIN OR GEORGIAN LETTERS ONLY!</mat-hint>
        <mat-error *ngIf="(lastNameControl?.touched || lastNameControl?.dirty) && lastNameControl?.errors?.required">
          This Field is required
        </mat-error>
        <mat-error
          *ngIf="(lastNameControl?.touched || lastNameControl?.dirty) && lastNameControl?.errors?.twoLanguageNotAllowed">
          Only one language allowed!
        </mat-error>
        <mat-error *ngIf="(lastNameControl?.touched || lastNameControl?.dirty) && lastNameControl?.errors?.pattern">Only
          letters allowed!
        </mat-error>
        <mat-error *ngIf="(lastNameControl?.touched || lastNameControl?.dirty) && lastNameControl?.errors?.minlength">
          Min 2 letters!
        </mat-error>
        <mat-error *ngIf="(lastNameControl?.touched || lastNameControl?.dirty) && lastNameControl?.errors?.maxlength">
          Max 50 letters!
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>gender</mat-label>
        <mat-select formControlName="gender">
          <mat-option value="male">male</mat-option>
          <mat-option value="female">female</mat-option>
        </mat-select>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Personal Number</mat-label>
        <input matInput placeholder="Placeholder" formControlName="personalNumber">
        <mat-hint>11 character personal number!</mat-hint>
        <mat-error
          *ngIf="(personalNumberControl?.touched || personalNumberControl?.dirty) && personalNumberControl?.errors?.required">
          This Field is required
        </mat-error>
        <mat-error
          *ngIf="(personalNumberControl?.touched || personalNumberControl?.dirty) && personalNumberControl?.errors?.pattern">
          Only numbers allowed!
        </mat-error>
        <mat-error
          *ngIf="(personalNumberControl?.touched || personalNumberControl?.dirty) && personalNumberControl?.errors?.minlength">
          Length should be 11 char!
        </mat-error>
        <mat-error
          *ngIf="(personalNumberControl?.touched || personalNumberControl?.dirty) && personalNumberControl?.errors?.maxlength">
          Length should be 11 char
        </mat-error>
      </mat-form-field>

      <mat-form-field appearance="outline">
        <mat-label>Phone Number</mat-label>
        <input matInput placeholder="Placeholder" formControlName="phoneNumber">
        <mat-hint>Phone number with 9 char!</mat-hint>
        <mat-error
          *ngIf="(phoneNumberControl?.touched || phoneNumberControl?.dirty) && phoneNumberControl?.errors?.required">
          This Field is required
        </mat-error>
        <mat-error
          *ngIf="(phoneNumberControl?.touched || phoneNumberControl?.dirty) && phoneNumberControl?.errors?.pattern">Only
          numbers allowed!
        </mat-error>
        <mat-error
          *ngIf="(phoneNumberControl?.touched || phoneNumberControl?.dirty) && phoneNumberControl?.errors?.minlength">
          Length should be 9 char!
        </mat-error>
        <mat-error
          *ngIf="(phoneNumberControl?.touched || phoneNumberControl?.dirty) && phoneNumberControl?.errors?.maxlength">
          Length should be 9 char
        </mat-error>
      </mat-form-field>

      <div class="image-uploader">
        <app-image-uploader (imageUploaded)="onImageUploaded($event)"></app-image-uploader>
        <img class="image" [src]="imageControl?.value" alt="">
      </div>

      <div class="address-container">
        <div class="address-box">
          <h3 class="help-box">Legal Address</h3>
          <div formGroupName="legalAddress">
            <mat-form-field appearance="outline">
              <mat-label>Country</mat-label>
              <input matInput placeholder="Placeholder" formControlName="country">
              <mat-error
                *ngIf="(legalAddressCountryControl?.touched || legalAddressCountryControl?.dirty) && legalAddressCountryControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <input matInput placeholder="Placeholder" formControlName="city">
              <mat-error
                *ngIf="(legalAddressCityControl?.touched || legalAddressCityControl?.dirty) && legalAddressCityControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Address</mat-label>
              <input matInput placeholder="Placeholder" formControlName="address">
              <mat-error
                *ngIf="(legalAddressAddressControl?.touched || legalAddressAddressControl?.dirty) && legalAddressAddressControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="address-container">
        <div class="address-box">
          <h3 class="help-box">Actual Address</h3>
          <div formGroupName="actualAddress">
            <mat-form-field appearance="outline">
              <mat-label>Country</mat-label>
              <input matInput placeholder="Placeholder" formControlName="country">
              <mat-error
                *ngIf="(actualAddressCountryControl?.touched || actualAddressCountryControl?.dirty) && actualAddressCountryControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>City</mat-label>
              <input matInput placeholder="Placeholder" formControlName="city">
              <mat-error
                *ngIf="(actualAddressCityControl?.touched || actualAddressCityControl?.dirty) && actualAddressCityControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Address</mat-label>
              <input matInput placeholder="Placeholder" formControlName="address">
              <mat-error
                *ngIf="(actualAddressAddressControl?.touched || actualAddressAddressControl?.dirty) && actualAddressAddressControl?.errors?.required">
                This Field is required>
              </mat-error>
            </mat-form-field>
          </div>
        </div>
      </div>

      <div class="accounts-container">
        <h4 class="add-account-text">Add Account(s) &nbsp;
          <button type="button" mat-raised-button color="primary" (click)="addAccounts()" class="add-account-button">
            Add More
          </button>
        </h4>
        <div class="account-container" formArrayName="account">
          <div *ngFor="let account of accountControl; let i = index"
               [formGroupName]="i">
            <mat-form-field appearance="outline">
              <mat-label>Account N.</mat-label>
              <input type="number" matInput formControlName="accountNumber">
              <mat-error
                *ngIf="(accountNumberControl?.touched || accountNumberControl?.dirty) && accountNumberControl?.errors?.required">
                This field is required
              </mat-error>
            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Account Type</mat-label>
              <mat-select formControlName="accountType">
                <mat-option value="current">Current</mat-option>
                <mat-option value="cumulative">Cumulative</mat-option>
                <mat-option value="saving">Saving</mat-option>
              </mat-select>

            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Currency</mat-label>
              <mat-select formControlName="currency" multiple>
                <mat-option value="GEL">GEL</mat-option>
                <mat-option value="USD">USD</mat-option>
                <mat-option value="EUR">EUR</mat-option>
                <mat-option value="RUB">RUB</mat-option>
              </mat-select>

            </mat-form-field>

            <mat-form-field appearance="outline">
              <mat-label>Account Status</mat-label>
              <mat-select formControlName="accountStatus">
                <mat-option value="open">Open</mat-option>
                <mat-option value="closed">Closed</mat-option>
              </mat-select>

            </mat-form-field>
            <mat-icon [ngStyle]="{opacity: i > 0 ? '1' : 0, cursor: i > 0 ? 'pointer' : 'default'}"
                      (click)="i > 0 && removeAccount(i)"
                      class="delete-icon">delete
            </mat-icon>
          </div>
        </div>

      </div>
      <button [disabled]="clientForm.invalid" type="submit" mat-raised-button
              color="primary">{{!isAddMode ? 'Update Client' : 'Add Client'}}</button>
    </form>
  </div>
</div>
